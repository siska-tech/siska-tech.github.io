# プロンプターアプリ - 結婚式MC用

## 概要

結婚式のMC（司会者）が原稿を読み上げる際に使用する、スマートフォン向けのプロンプターアプリケーションです。Markdown形式の原稿を読み込み、自動/手動スクロールで表示します。

**特に外国人向け**に、日本語のふりがな（ルビ）表示機能を搭載しており、日本語の読み上げが容易になるよう配慮されています。

## 主な機能

- **Markdown形式の原稿読み込み**: `.md`ファイルを読み込んで表示
- **自動・手動スクロール**: 自動スクロールと手動スクロール（スワイプ）の両方に対応
- **フォントサイズ調整**: 6段階（小・標準・大・最大・超大・特大）で調整可能
- **スクロール速度調整**: 5段階（遅い・やや遅い・標準・やや速い・速い）で調整可能
- **テーマ切り替え**: 3種類のテーマ（ダーク・ライト・セピア）から選択可能
- **ふりがな表示機能**: 日本語の漢字にふりがなを表示（表示/非表示の切り替え可能）
- **行間調整**: 読みやすさのための行間設定（5段階）
- **多言語対応**: 日本語、英語、ベトナム語に対応
- **設定の自動保存**: 設定はブラウザのLocalStorageに自動保存され、次回起動時に復元
- **フルスクリーン表示**: 全画面表示モードに対応
- **画面ロック防止**: 自動スクロール中は画面がロックされないよう配慮
- **キーボードショートカット**: デスクトップブラウザでの操作をサポート

## セットアップ

### 必要なファイル

このアプリケーションは以下のファイルで構成されています：

```text
Prompter/
├── index.html              # メインHTML
├── css/
│   └── style.css          # スタイルシート
├── js/
│   ├── app.js             # メインアプリケーションロジック
│   ├── markdown-parser.js # Markdownパーサー（ふりがな処理含む）
│   ├── settings.js        # 設定管理
│   └── i18n.js            # 多言語対応
└── README.md              # このファイル
```

### インストール方法

1. **ファイルのダウンロード**: プロジェクトのすべてのファイルをダウンロードします

2. **依存関係**: このアプリケーションは以下の外部ライブラリを使用しています：
   - **marked.js** (v11.1.1): Markdownパーサー
   - ライブラリはCDNから自動的に読み込まれます（インターネット接続が必要）

3. **ローカルでの実行**:
   - すべてのファイルを同じディレクトリに配置します
   - `index.html`をブラウザで開きます
   - ローカルサーバーを使用することを推奨します（以下の方法を参照）

### ローカルサーバーでの実行（推奨）

#### Pythonを使用する場合

```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

ブラウザで `http://localhost:8000` にアクセスします。

#### Node.jsを使用する場合

```bash
# http-serverをインストール
npm install -g http-server

# サーバーを起動
http-server
```

#### VS Codeを使用する場合

Live Server拡張機能をインストールして使用できます。

### オフラインでの使用

一度ブラウザで読み込めば、インターネット接続がなくても動作します（marked.jsはCDNから読み込まれるため、初回のみインターネット接続が必要です）。

## 使用方法

### 1. ファイルの読み込み

1. 画面上部の「ファイル」ボタンをタップします
2. ファイル選択ダイアログからMarkdownファイル（`.md`）を選択します
3. 原稿が読み込まれ、画面に表示されます

### 2. 基本的な操作

#### 自動スクロール

- **再生**: コントロールバーの「再生」ボタンをタップすると、自動スクロールが開始されます
- **一時停止**: 「一時停止」ボタンをタップすると、自動スクロールが停止します
- **リセット**: 「リセット」ボタンをタップすると、スクロール位置が先頭に戻ります

#### 手動スクロール

- 画面をスワイプ（上下にスワイプ）することで、手動でスクロールできます
- 自動スクロール中でも手動スクロールは可能です

#### スクロール速度の調整

- **速度−**: スクロール速度を遅くします
- **速度＋**: スクロール速度を速くします
- 設定画面からも調整可能です（5段階）

### 3. 設定の変更

1. 画面上部の「設定」ボタンをタップします
2. 設定モーダルが開きます
3. 以下の設定を変更できます：
   - **フォントサイズ**: 6段階（小・標準・大・最大・超大・特大）
   - **スクロール速度**: 5段階（遅い・やや遅い・標準・やや速い・速い）
   - **テーマ**: ダーク・ライト・セピアから選択
   - **行間調整**: 5段階（狭い・やや狭い・標準・やや広い・広い）
   - **ふりがな表示**: ON/OFFで切り替え
   - **言語**: 日本語・英語・ベトナム語から選択
4. 設定は自動的に保存され、次回起動時に復元されます

### 4. フルスクリーン表示

- 画面上部の「全画面」ボタンをタップすると、フルスクリーン表示になります
- 再度タップすると、通常表示に戻ります

### 5. UIの最小化

- ヘッダーとコントロールバーには最小化ボタン（−）があります
- タップすると、UIが最小化され、より広い表示領域を確保できます
- 再度タップ（＋）すると、UIが展開されます

### キーボードショートカット（デスクトップブラウザ）

- **Space**: 再生/一時停止の切り替え
- **↑ (上矢印)**: スクロール速度を速くする
- **↓ (下矢印)**: スクロール速度を遅くする
- **ESC**: 設定モーダルを閉じる

## 原稿の書き方

### Markdown形式

原稿はMarkdown形式（`.md`ファイル）で記述します。基本的なMarkdown記法が使用できます：

```markdown
# 見出し1

## 見出し2

### 見出し3

これは段落です。

- 箇条書き項目1
- 箇条書き項目2

1. 番号付きリスト項目1
2. 番号付きリスト項目2

**太字**や*斜体*も使用できます。
```

### ふりがなの記述方法

日本語の漢字にふりがなを付けるには、以下の2つの方法があります：

#### 方法1: HTML形式

HTMLの`<ruby>`タグを使用します：

```markdown
<ruby>漢字<rt>かんじ</rt></ruby>
```

例：

```markdown
こんにちは、<ruby>結婚式<rt>けっこんしき</rt></ruby>の<ruby>司会<rt>しかい</rt></ruby>を<ruby>担当<rt>たんとう</rt></ruby>します。
```

#### 方法2: 拡張構文

より簡潔な記法を使用できます：

**形式1**: `{漢字|かんじ}`

```markdown
{結婚式|けっこんしき}の{司会|しかい}を{担当|たんとう}します。
```

**形式2**: `漢字{かんじ}`

```markdown
結婚式{けっこんしき}の司会{しかい}を担当{たんとう}します。
```

### サンプル原稿

```markdown
# 結婚式のご挨拶

皆様、本日は<ruby>結婚式<rt>けっこんしき</rt></ruby>にご<ruby>臨席<rt>りんせき</rt></ruby>いただき、ありがとうございます。

## 新郎新婦の紹介

<ruby>新郎<rt>しんろう</rt></ruby>の<ruby>田中<rt>たなか</rt></ruby><ruby>太郎<rt>たろう</rt></ruby>さんと、<ruby>新婦<rt>しんぷ</rt></ruby>の<ruby>佐藤<rt>さとう</rt></ruby><ruby>花子<rt>はなこ</rt></ruby>さんをご紹介いたします。

## 乾杯の音頭

それでは、<ruby>乾杯<rt>かんぱい</rt></ruby>の<ruby>音頭<rt>おんど</rt></ruby>をお願いいたします。
```

または、拡張構文を使用：

```markdown
# 結婚式のご挨拶

皆様、本日は{結婚式|けっこんしき}にご{臨席|りんせき}いただき、ありがとうございます。

## 新郎新婦の紹介

{新郎|しんろう}の{田中|たなか}{太郎|たろう}さんと、{新婦|しんぷ}の{佐藤|さとう}{花子|はなこ}さんをご紹介いたします。
```

### 原稿作成のヒント

- **見出しを使用**: セクションを分けることで、読みやすくなります
- **適切な改行**: 読み上げやすいように、適切な位置で改行します
- **ふりがなの活用**: 読みにくい漢字には必ずふりがなを付けます
- **文字エンコーディング**: ファイルはUTF-8で保存してください

## ブラウザ対応

### 対応ブラウザ

- **iOS Safari**: 13以降
- **Android Chrome**: 90以降
- **その他のモダンブラウザ**: 最新バージョン

### 推奨ブラウザ

- **iPhone**: Safari
- **Android**: Chrome

### 既知の問題・制限事項

- **Wake Lock API**: 画面ロック防止機能は、対応しているブラウザでのみ動作します
- **フルスクリーンAPI**: ブラウザによって動作が異なる場合があります
- **ファイル読み込み**: 一部のブラウザでは、大きなファイル（10,000行以上）の読み込みに時間がかかる場合があります

## トラブルシューティング

### よくある問題と解決方法

#### 1. ファイルが読み込めない

**問題**: Markdownファイルを選択しても読み込まれない

**解決方法**:
- ファイルが`.md`拡張子であることを確認してください
- ファイルがUTF-8エンコーディングで保存されていることを確認してください
- ブラウザのコンソール（開発者ツール）でエラーメッセージを確認してください

#### 2. ふりがなが表示されない

**問題**: ふりがなを記述したが、表示されない

**解決方法**:
- 設定画面で「ふりがな表示」がONになっているか確認してください
- ふりがなの記述方法が正しいか確認してください（`<ruby>`タグまたは拡張構文）
- ブラウザが`<ruby>`タグに対応しているか確認してください（モダンブラウザでは対応済み）

#### 3. 自動スクロールが動作しない

**問題**: 「再生」ボタンをタップしてもスクロールしない

**解決方法**:
- ファイルが正しく読み込まれているか確認してください
- スクロール可能なコンテンツがあるか確認してください（ファイルが空でないか）
- ブラウザのコンソールでエラーメッセージを確認してください

#### 4. 設定が保存されない

**問題**: 設定を変更しても、次回起動時に反映されない

**解決方法**:
- ブラウザのLocalStorageが有効になっているか確認してください
- プライベートブラウジングモードでは設定が保存されない場合があります
- ブラウザの設定でCookieとサイトデータが許可されているか確認してください

#### 5. 文字化けが発生する

**問題**: 日本語の文字が正しく表示されない

**解決方法**:
- ファイルがUTF-8エンコーディングで保存されていることを確認してください
- テキストエディタで「名前を付けて保存」→「エンコーディング: UTF-8」を選択してください

#### 6. 画面がロックされる

**問題**: 自動スクロール中に画面がロックされる

**解決方法**:
- Wake Lock APIに対応していないブラウザでは、この機能は使用できません
- デバイスの設定で画面ロック時間を延長してください

### FAQ

**Q: 複数の原稿を管理できますか？**  
A: 現在のバージョンでは、一度に1つのファイルのみ読み込めます。複数の原稿を使用する場合は、ファイルを切り替えて読み込んでください。

**Q: 原稿を編集できますか？**  
A: 現在のバージョンでは、原稿の編集機能はありません。原稿は外部のテキストエディタで編集してください。

**Q: オフラインで使用できますか？**  
A: 初回のみインターネット接続が必要です（marked.jsの読み込み）。その後はオフラインでも動作します。

**Q: 他の言語の原稿にも対応していますか？**  
A: 原稿の内容は任意の言語で記述できます。UIの言語は日本語・英語・ベトナム語から選択できます。

**Q: ふりがなのフォントサイズを調整できますか？**  
A: ふりがなのフォントサイズは、本文のフォントサイズに応じて自動的に調整されます。個別の調整機能は現在ありません。

## ライセンス・クレジット

### 使用ライブラリ

- **marked.js** (v11.1.1)
  - ライセンス: MIT License
  - URL: <https://marked.js.org/>
  - CDN: <https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js>

### ライセンス

このプロジェクトのライセンス情報については、プロジェクトのルートディレクトリを確認してください。

---

**作成日**: 2024年  
**バージョン**: 1.0
